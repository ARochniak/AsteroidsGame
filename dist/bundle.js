!function(s){var e={};function t(i){if(e[i])return e[i].exports;var a=e[i]={i:i,l:!1,exports:{}};return s[i].call(a.exports,a,a.exports,t),a.l=!0,a.exports}t.m=s,t.c=e,t.d=function(s,e,i){t.o(s,e)||Object.defineProperty(s,e,{enumerable:!0,get:i})},t.r=function(s){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},t.t=function(s,e){if(1&e&&(s=t(s)),8&e)return s;if(4&e&&"object"==typeof s&&s&&s.__esModule)return s;var i=Object.create(null);if(t.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:s}),2&e&&"string"!=typeof s)for(var a in s)t.d(i,a,function(e){return s[e]}.bind(null,a));return i},t.n=function(s){var e=s&&s.__esModule?function(){return s.default}:function(){return s};return t.d(e,"a",e),e},t.o=function(s,e){return Object.prototype.hasOwnProperty.call(s,e)},t.p="",t(t.s=0)}([function(s,e,t){"use strict";t.r(e);new class{constructor(s,e){this.model=s,this.view=e,this.view.setCanvas(this.model.sizes.canvas),this.model.setAsteroids(this.model.level,4),this.view.bind("keydown",this.keyDownHandler.bind(this)),this.view.bind("keyup",this.keyUpHandler.bind(this))}gameRender(){const s=this.model.asteroids,e=this.model.spaceship,t=this.model.sizes;this.view.drawAll({spaceStation:this.model.spaceStation,spaceship:e,asteroids:s},t,this.model.gameBegin),this.checkLose(s,e,t).checkWin(e,t),this.model.asteroidsBouncing().spaceshipCoordsChange(),requestAnimationFrame(this.gameRender.bind(this))}checkIntersection(s,e,t){const i=t.spaceship/2,a=t.asteroid/2,h=Math.abs(s.x+i-e.x-a),r=Math.abs(s.y+i-e.y-a);return i+a>Math.sqrt(h*h+r*r)}checkLose(s,e,t){if(!this.model.gameBegin)return this;for(let i=0;i<s.length;i++)this.checkIntersection(e,s[i],t)&&(setTimeout(()=>alert("You lose!"),0),document.location.reload());return this}checkWin(s,e){s.x===e.canvas.width-e.spaceship&&s.y===e.canvas.height-e.spaceship&&(setTimeout(()=>alert("You complete the level!"),0),this.model.levelUp())}keyDownHandler(s){s.repeat||this.model.moveStarship(s.keyCode)}keyUpHandler(s){this.model.stopMovingStarship(s.keyCode)}}(new class{constructor(){this.level=1,this.gameBegin=!1,this.sizes={canvas:{width:1060,height:640},asteroid:30,spaceship:60},this.asteroids=[],this.ssDirection={left:!1,top:!1,right:!1,bottom:!1},this.spaceship={x:0,y:0,speed:7},this.spaceStation={x:this.sizes.canvas.width-this.sizes.spaceship,y:this.sizes.canvas.height-this.sizes.spaceship}}setAsteroids(s,e){const t=2*this.sizes.spaceship,i=this;let a=r("width"),h=r("height");this.asteroids=[];for(let t,i=0;i<s;i++){t={x:a,y:h,dx:Math.random()>.5?e:-e,dy:Math.random()>.5?e:-e},this.asteroids.push(t),a=r("width"),h=r("height");for(let s=0;s<this.asteroids.length;)Math.abs(this.asteroids[s].x-a)<1.5*this.sizes.asteroid&&Math.abs(this.asteroids[s].y-h)<1.5*this.sizes.asteroid?(s=0,a=r("width"),h=r("height")):s++}function r(s){let e=t+Math.random()*(i.sizes.canvas[s]-2*t+1);return Math.floor(e)}}levelUp(){this.level++,this.resetStarship(),this.setAsteroids(this.level,4)}spaceshipCoordsChange(){const s=this.ssDirection,e=this.sizes,t=this.spaceship;for(let i in s)if(s[i])switch(i){case"left":t.x>t.speed?t.x-=t.speed:t.x=0;break;case"top":t.y>t.speed?t.y-=t.speed:t.y=0;break;case"right":e.canvas.width-t.x>e.spaceship+t.speed?t.x+=t.speed:t.x=e.canvas.width-e.spaceship;break;case"bottom":e.canvas.height-t.y>e.spaceship+t.speed?t.y+=t.speed:t.y=e.canvas.height-e.spaceship}}asteroidsBouncing(){const s=this.asteroids,e=this.sizes.asteroid;return s.forEach((t,i)=>{(t.x+t.dx>this.sizes.canvas.width-e||t.x+t.dx<0)&&(t.dx=-t.dx),(t.y+t.dy>this.sizes.canvas.height-e||t.y+t.dy<0)&&(t.dy=-t.dy);for(let a=i+1;a<s.length;a++)if(Math.abs(t.x+t.dx-s[a].x-s[a].dx)<e&&Math.abs(t.y+t.dy-s[a].y-s[a].dy)<e){Math.abs(t.x-s[a].x)>=e?(t.dx=-t.dx,s[a].dx=-s[a].dx):(t.dy=-t.dy,s[a].dy=-s[a].dy);break}s[i].x+=s[i].dx,s[i].y+=s[i].dy}),this}moveStarship(s){this.gameBegin||(this.gameBegin=!0);const e=this.ssDirection;switch(s){case 37:e.left=!0;break;case 38:e.top=!0;break;case 39:e.right=!0;break;case 40:e.bottom=!0}}stopMovingStarship(s){const e=this.ssDirection;switch(s){case 37:e.left=!1;break;case 38:e.top=!1;break;case 39:e.right=!1;break;case 40:e.bottom=!1}}resetStarship(){this.spaceship.x=this.spaceship.y=0,this.gameBegin=!1;for(let s in this.ssDirection)this.ssDirection[s]=!1}},new class{constructor(){this.canvas=document.getElementById("asteroidsCanvas"),this.ctx=this.canvas.getContext("2d"),this.spaceshipImg=new Image,this.spaceshipTransparentImg=new Image,this.asteroidImg=new Image,this.spaceStationImg=new Image}setCanvas(s){this.canvas.width=s.width,this.canvas.height=s.height,this.spaceshipImg.src="./images/spaceship.png",this.spaceshipTransparentImg.src="./images/transparent_spaceship.png",this.asteroidImg.src="./images/asteroid.png",this.spaceStationImg.src="./images/spacestation.png"}drawAsteroid(s,e){this.ctx.drawImage(this.asteroidImg,s.x,s.y,e,e)}drawSpaceship(s,e,t){t?this.ctx.drawImage(this.spaceshipImg,s.x,s.y,e,e):this.ctx.drawImage(this.spaceshipTransparentImg,s.x,s.y,e,e)}clearCanvas(){return this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this}drawSpaceStation(s,e){return this.ctx.drawImage(this.spaceStationImg,s.x,s.y,e,e),this}drawAll(s,e,t){this.clearCanvas().drawSpaceStation(s.spaceStation,e.spaceship).drawSpaceship(s.spaceship,e.spaceship,t),s.asteroids.forEach(s=>{this.drawAsteroid(s,e.asteroid)})}bind(s,e){document.addEventListener(s,e)}}).gameRender()}]);